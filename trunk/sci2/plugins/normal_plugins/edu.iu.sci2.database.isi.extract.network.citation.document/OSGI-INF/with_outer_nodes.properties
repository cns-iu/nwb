menu_path=Extract/ISI/end
label=Extract Document Citation Network (Core and References)
description=This algorithm extracts a Document to Document citation network from an ISI database, including referenced nodes.
in_data=db:isi
out_data=prefuse.data.Graph
service.pid=edu.iu.sci2.database.isi.extract.network.citation.document.ISIDocumentCitationNetworkWithOuterNodes
remoteable=true
documentation_url=http://wiki.cns.iu.edu/display/CISHELL/Extract+Document+Citation+Network+%28Core+and+References%29

node_query= \
SELECT \n\
'D' || CHAR (DOCUMENTS.PK) AS ID, \n\
TITLE, \n\
ISI_TYPE AS publication_type, \n\
ABSTRACT, \n\
DOCUMENT_NUMBER, \n\
BEGINNING_PAGE, \n\
CITED_CITATION_COUNT, \n\
DIGITAL_OBJECT_IDENTIFIER, \n\
VOLUME, \n\
ENDING_PAGE, \n\
FUNDING_AGENCY_AND_GRANT_NUMBER, \n\
FUNDING_TEXT, \n\
ISBN, \n\
ISI_DOCUMENT_DELIVERY_NUMBER, \n\
ISI_UNIQUE_ARTICLE_IDENTIFIER, \n\
ISSUE, \n\
LANGUAGE, \n\
PAGE_COUNT, \n\
PART_NUMBER, \n\
PUBLICATION_DATE, \n\
PUBLICATION_YEAR, \n\
SPECIAL_ISSUE, \n\
SUBJECT_CATEGORY, \n\
SUPPLEMENT, \n\
TIMES_CITED, \n\
CITE_AS, \n\
VARCHAR ( \n\
COALESCE ( \n\
PEOPLE.FAMILY_NAME || ' ' || CHAR (DOCUMENTS.PUBLICATION_YEAR, 4), \n\
PEOPLE.RAW_NAME || ' ' || CHAR (DOCUMENTS.PUBLICATION_YEAR, 4), \n\
DOCUMENTS.TITLE, \n\
'Document with ID ' || CHAR (DOCUMENTS.PK)), \n\
32000) \n\
AS LABEL, \n\
VARCHAR ( \n\
COALESCE ( \n\
SOURCES.FULL_TITLE, \n\
SOURCES.TWENTY_NINE_CHARACTER_SOURCE_TITLE_ABBREVIATION, \n\
SOURCES.ISO_TITLE_ABBREVIATION, \n\
'Conference ' || SOURCES.CONFERENCE_TITLE, \n\
'Book Series ' || SOURCES.BOOK_SERIES_TITLE, \n\
'Source with ID ' || CHAR (SOURCES.PK)), \n\
32000) \n\
AS SOURCES \n\
FROM \n\
DOCUMENTS \n\
LEFT JOIN \n\
PEOPLE \n\
ON (DOCUMENTS.FIRST_AUTHOR_ID = PEOPLE.PK) \n\
LEFT JOIN \n\
SOURCES --DERBY-PROPERTIES joinStrategy=HASH \n\
ON (DOCUMENTS.SOURCE_ID = SOURCES.PK) \n\
UNION \n\
SELECT \n\
'R' || CHAR (CITATIONS.PK) AS ID, \n\
CITATIONS.RAW_CITATION AS TITLE, \n\
'' AS publication_type, \n\
'' AS ABSTRACT, \n\
'' AS DOCUMENT_NUMBER, \n\
CITATIONS.PAGE_NUMBER AS BEGINNING_PAGE, \n\
-1 AS CITED_CITATION_COUNT, \n\
CITATIONS.DIGITAL_OBJECT_IDENTIFIER, \n\
CITATIONS.VOLUME AS VOLUME, \n\
-1 AS ENDING_PAGE, \n\
'' AS FUNDING_AGENCY_AND_GRANT_NUMBER, \n\
'' AS FUNDING_TEXT, \n\
'' AS ISBN, \n\
'' AS ISI_DOCUMENT_DELIVERY_NUMBER, \n\
'' AS ISI_UNIQUE_ARTICLE_IDENTIFIER, \n\
'' AS ISSUE, \n\
'' AS LANGUAGE, \n\
-1 AS PAGE_COUNT, \n\
'' AS PART_NUMBER, \n\
'' AS PUBLICATION_DATE, \n\
CITATIONS."YEAR" AS PUBLICATION_YEAR, \n\
'' AS SPECIAL_ISSUE, \n\
'' AS SUBJECT_CATEGORY, \n\
'' AS SUPPLEMENT, \n\
-1 AS TIMES_CITED, \n\
'' AS CITE_AS, \n\
CITATIONS.RAW_CITATION AS LABEL, \n\
VARCHAR ( \n\
COALESCE ( \n\
SOURCES.FULL_TITLE, \n\
SOURCES.TWENTY_NINE_CHARACTER_SOURCE_TITLE_ABBREVIATION, \n\
SOURCES.ISO_TITLE_ABBREVIATION, \n\
'Conference ' || SOURCES.CONFERENCE_TITLE, \n\
'Book Series ' || SOURCES.BOOK_SERIES_TITLE, \n\
'Source with ID ' || CHAR (SOURCES.PK)), \n\
32000) \n\
AS SOURCES \n\
FROM \n\
CITATIONS \n\
LEFT JOIN \n\
SOURCES --DERBY-PROPERTIES joinStrategy=HASH \n\
ON (CITATIONS.SOURCE_ID = SOURCES.PK) \n\
WHERE \n\
CITATIONS.DOCUMENT_ID IS NULL

edge_query= \
SELECT \n\
'D' || CHAR (DOCUMENT1.PK) AS TARGET, \n\
'D' || CHAR (DOCUMENT2.PK) AS SOURCE \n\
FROM \n\
DOCUMENTS DOCUMENT1 \n\
JOIN \n\
CITED_CITATIONS CITED_CITATION1 \n\
ON (DOCUMENT1.PK = CITED_CITATION1.DOCUMENT_ID) \n\
JOIN \n\
CITATIONS CITATION1 \n\
ON (CITED_CITATION1.CITATION_ID = CITATION1.PK) \n\
JOIN \n\
DOCUMENTS DOCUMENT2 --DERBY-PROPERTIES joinStrategy=HASH \n\
ON (CITATION1.DOCUMENT_ID = DOCUMENT2.PK) \n\
UNION \n\
SELECT \n\
'D' || CHAR (DOCUMENT3.PK) AS TARGET, \n\
'R' || CHAR (CITATION2.PK) AS SOURCE \n\
FROM \n\
DOCUMENTS DOCUMENT3 \n\
JOIN \n\
CITED_CITATIONS CITED_CITATION2 \n\
ON (DOCUMENT3.PK = CITED_CITATION2.DOCUMENT_ID) \n\
JOIN \n\
CITATIONS CITATION2 --DERBY-PROPERTIES joinStrategy=HASH \n\
ON (CITED_CITATION2.CITATION_ID = CITATION2.PK) \n\
WHERE \n\
CITATION2.DOCUMENT_ID IS NULL

id_column=ID
source_column=SOURCE
target_column=TARGET
directed=true
output_label=Document Citation Network (Core and References)
