{% extends "core/browse.html" %}

{% load category_templatetags %}
{% load datarequest_templatetags %}
{% load dataset_templatetags %}
{% load project_templatetags %}

{% block content %}
  <form name="search" action="." method="get">
    {% if search_string %}
      Search for: <input type="text" name="search_string" value="{{ search_string }}" />
    {% else %}
      Search for: <input type="text" name="search_string" />
    {% endif %}
    
    <input type="submit" value="Go!" />
  </form>
  
  {% if datasets or projects or datarequests %}
    <h1>Datasets</h1>
    
    {% if datasets %}
      {% datasets_list datasets %}
    {% else %}
      <p>There are no resulting Datasets for the search string "{{ search_string }}".</p>
    {% endif %}
    
    <h1>Data Requests:</h1>
    
    {% if datarequests %}
      {% datarequest_list datarequests %}
    {% else %}
      <p>There are no resulting Datarequests for the search string "{{ search_string }}".</p>
    {% endif %}
    
    <h1>Projects</h1>
    
    {% if projects %}
      {% project_list projects %}
    {% else %}
      <p>There are no resulting Projects for the search string "{{ search_string }}".</p>
    {% endif %}
  {% else %}
    {% if error_message %}
      <p>{{ error_message }}</p>
    {% else %}
      {% if search_string %}
        <p>Sorry, no results matched the term "{{ search_string }}".</p>
      {% endif %}
    {% endif %}
  {% endif %}
{% endblock %}