	<!-- 
		
		"rate_box_view_helper" template has to be always loaded before "rate_box_view" 
		because of a dependecy JavaScript code that will be required by the rate_view_box 
		template.
		
	 -->

<div class="ratingsbox">Avg: <span id="average-value">{{ rating }}</span> | Total Votes: <span id="votes-value">{{ votes }}</span>
	
	<span class="average-voting">
	<span class="inline-rating">
		<ul class="star-rating  small-star" id="{{ item_id }}-average-vote">
			<li class="current-rating" style="width:0%;">0 Star</li>
			<li><a id="1" title="Very Bad" class="one-star">1</a></li>
			<li><a id="2" title="Bad" class="two-stars">2</a></li>
			<li><a id="3" title="Average" class="three-stars">3</a></li>
			<li><a id="4" title="Good" class="four-stars">4</a></li>
			<li><a id="5" title="Very Good" class="five-stars">5</a></li>
		</ul>
    </span>
	</span>

	<br />
	
{% if user_rating %}

	<!-- If the user rating is provided then render the star box. -->
	<span class="user-voting">
	Your Vote: <span id="user-vote-value">{{ user_rating }}</span> 
				
		<span class="inline-rating">
			<ul class="star-rating  small-star" id="{{ item_id }}-user-vote">
				<li class="current-rating" style="width:0%;">0 Star</li>
				<li><a title="Very Bad" class="one-star">1</a></li>
				<li><a title="Bad" class="two-stars">2</a></li>
				<li><a title="Average" class="three-stars">3</a></li>
				<li><a title="Good" class="four-stars">4</a></li>
				<li><a title="Very Good" class="five-stars">5</a></li>
			</ul>
	    </span>
	
	</span>
	
	<script>

		$(document).ready(function(){

			/*
			*	These methods basically render the fill the stars according to the rating.
			*	These methods are defined in the rate_view_box_helper to avoid multiple 
			*	copies of the same function when more than 1 dataset is displayed. 
			*
			*/

			renderAvgVoteBox({{ rating }},{{ item_id }});
			renderUserVoteBox({{ user_rating }},{{ item_id }});

			/*
			*	Disable user interaction with the stars.
			*
			*/
			
			$("#{{ item_id }}-average-vote").addClass("star-rating-readonly");
			$("#{{ item_id }}-user-vote").addClass("star-rating-readonly");
			
		});
	
	</script>
	
{% else %}	

	<script>

		$(document).ready(function(){

			renderAvgVoteBox({{ rating }},{{ item_id }});
			$("#{{ item_id }}-average-vote").addClass("star-rating-readonly");
			
		});
	
	</script>

	<a href="{% url datasets.views.view_dataset item_id=item_id %}">Rate Now</a>
	
{% endif %}	

</div>

