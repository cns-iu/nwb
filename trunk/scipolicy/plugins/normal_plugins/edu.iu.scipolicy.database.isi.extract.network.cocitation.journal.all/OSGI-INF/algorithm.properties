menu_path=Extract/ISI/start
label=Journal Co-Citation Network
description=Extracts the journal co-citation network from this database.
in_data=db:isi
out_data=prefuse.data.Graph
service.pid=edu.iu.scipolicy.database.isi.extract.network.cocitation.journal.all
remoteable=true
node_query= \
SELECT   id, \n\
         label, \n\
         Max(CASE \n\
               WHEN document_pk IS NULL \n\
               THEN 0 \n\
               ELSE 1 \n\
             END) AS is_found_in_document, \n\
         full_title, \n\
         iso_title_abbreviation, \n\
         twenty_nine_character_source_title_abbreviation AS short_title, \n\
         publication_type, \n\
         issn, \n\
         book_series_title, \n\
         book_series_subtitle, \n\
         conference_title, \n\
         conference_host, \n\
         conference_location, \n\
         conference_sponsors \n\
FROM     (SELECT source.pk                   AS id, \n\
                 Coalesce(source.full_title, \n\
                          source.iso_title_abbreviation, \n\
                          source.twenty_nine_character_source_title_abbreviation, \n\
                          'Source with ID ' || Char(source.pk)) AS label, \n\
                 document.pk                 AS document_pk, \n\
                 source.full_title, \n\
                 source.iso_title_abbreviation, \n\
                 source.twenty_nine_character_source_title_abbreviation, \n\
                 source.publication_type, \n\
                 source.issn, \n\
                 source.book_series_title, \n\
                 source.book_series_subtitle, \n\
                 source.conference_title, \n\
                 source.conference_host, \n\
                 source.conference_location, \n\
                 source.conference_sponsors \n\
          FROM   source \n\
                 LEFT JOIN document --DERBY-PROPERTIES joinStrategy=HASH \n\
                   ON (source.pk = document.document_source_fk)) AS TEMP \n\
GROUP BY id, \n\
         label, \n\
         full_title, \n\
         iso_title_abbreviation, \n\
         twenty_nine_character_source_title_abbreviation, \n\
         publication_type, \n\
         issn, \n\
         book_series_title, \n\
         book_series_subtitle, \n\
         conference_title, \n\
         conference_host, \n\
         conference_location, \n\
         conference_sponsors
edge_query= \
SELECT   source, \n\
         target, \n\
         intersection    AS weight, \n\
         intersection    AS times_cocited, \n\
         earliest_cocitation, \n\
         latest_cocitation \n\
FROM (SELECT \n\
         source, \n\
         target, \n\
         Count(distinct citer) AS intersection, \n\
         Min(pubyear) AS earliest_cocitation, \n\
         Max(pubyear) AS latest_cocitation \n\
FROM     (SELECT Coalesce(docsource1.pk, refsource1.pk) AS source, \n\
                 Coalesce(docsource2.pk, refsource2.pk) AS target, \n\
                 citing_document.pk                     AS citer, \n\
                 citing_document.publication_year       AS pubyear \n\
          FROM   cited_references cited_references1 \n\
                 JOIN cited_references cited_references2  --DERBY-PROPERTIES joinStrategy=HASH \n\
                   ON (cited_references1.cited_references_document_fk = cited_references2.cited_references_document_fk) \n\
                 JOIN document citing_document  --DERBY-PROPERTIES joinStrategy=HASH \n\
                   ON (cited_references1.cited_references_document_fk = citing_document.pk) \n\
                 -- Chain 1. \n\
                 JOIN reference reference1  --DERBY-PROPERTIES joinStrategy=HASH \n\
                   ON (cited_references1.cited_references_reference_fk = reference1.pk) \n\
                 LEFT JOIN source refsource1  --DERBY-PROPERTIES joinStrategy=HASH \n\
                   ON (reference1.reference_source_fk = refsource1.pk) \n\
                 LEFT JOIN document cited_document1  --DERBY-PROPERTIES joinStrategy=HASH \n\
                   ON (reference1.paper_fk = cited_document1.pk) \n\
                 LEFT JOIN source docsource1  --DERBY-PROPERTIES joinStrategy=HASH \n\
                   ON (cited_document1.document_source_fk = docsource1.pk) \n\
                 -- Chain 2. \n\
                 JOIN reference reference2  --DERBY-PROPERTIES joinStrategy=HASH \n\
                   ON (cited_references2.cited_references_reference_fk = reference2.pk) \n\
                 LEFT JOIN source refsource2  --DERBY-PROPERTIES joinStrategy=HASH \n\
                   ON (reference2.reference_source_fk = refsource2.pk) \n\
                 LEFT JOIN document cited_document2 --DERBY-PROPERTIES joinStrategy=HASH  \n\
                   ON (reference2.paper_fk = cited_document2.pk) \n\
                 LEFT JOIN source docsource2 --DERBY-PROPERTIES joinStrategy=HASH \n\
                   ON (cited_document2.document_source_fk = docsource2.pk) \n\
          WHERE  (docsource1.pk IS NOT NULL OR refsource1.pk IS NOT NULL) \n\
                 AND (docsource2.pk IS NOT NULL OR refsource2.pk IS NOT NULL)) AS inner_query \n\
WHERE    source < target \n\
GROUP BY source, target) as inner_query
id_column=ID
source_column=SOURCE
target_column=TARGET
directed=false
output_label=Journal co-citation network
documentation_url=https://nwb.slis.indiana.edu/community/?n=Sci2Algorithm.ISIJournalCoCitationNetwork