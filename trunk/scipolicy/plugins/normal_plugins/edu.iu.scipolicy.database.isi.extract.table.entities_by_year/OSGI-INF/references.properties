menu_path=Extract/From ISI Database/end
label=Extract References By Year
description=This algorithm extracts the references out of an ISI database into a table.
in_data=db:isi
out_data=prefuse.data.Table
service.pid=edu.iu.scipolicy.database.isi.extract.table.entities_by_year.ExtractReferencesByYearAlgorithm
remoteable=true

query = \
SELECT \n\
	REFERENCE, \n\
	REFERENCE_ID, \n\
	"YEAR", \n\
	COUNT (*) AS NUMBER_OF_TIMES_REFERENCED_THIS_YEAR \n\
FROM \n\
	( \n\
		SELECT \n\
			REFERENCE.RAW_REFERENCE_STRING AS REFERENCE, \n\
			REFERENCE.PK AS REFERENCE_ID, \n\
			DOCUMENT.PUBLICATION_YEAR AS "YEAR" \n\
		FROM \n\
			REFERENCE \n\
		JOIN \n\
			CITED_REFERENCES \n\
				ON (REFERENCE.PK = CITED_REFERENCES.CITED_REFERENCES_REFERENCE_FK) \n\
		JOIN \n\
			DOCUMENT \n\
				ON (CITED_REFERENCES.CITED_REFERENCES_DOCUMENT_FK = DOCUMENT.PK) \n\
	) AS TEMP \n\
GROUP BY \n\
	REFERENCE, \n\
	REFERENCE_ID, \n\
	"YEAR"

output_label = References by Year